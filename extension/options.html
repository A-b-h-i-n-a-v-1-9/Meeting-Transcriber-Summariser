<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Meeting Recorder – Permissions</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 16px; }
      button { font-size: 14px; padding: 8px 12px; }
    </style>
  </head>
  <body>
    <h1>Grant Microphone Access</h1>
    <p>Click the button below once to allow mic access for the extension.</p>
    <button id="grant">Request Microphone</button>
    <p id="msg"></p>
    <script>
      document.getElementById("grant").addEventListener("click", async () => {
        const msg = document.getElementById("msg");
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          // immediately stop tracks; we just needed permission
          stream.getTracks().forEach(t => t.stop());
          msg.textContent = "✅ Microphone permission granted!";
        } catch (e) {
          msg.textContent = "❌ Failed to get mic permission: " + (e?.message || e);
        }
      });
    </script>
  </body>
</html>
